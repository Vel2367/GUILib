local Lib = {}

if game.CoreGui:FindFirstChild("ScriptGui") then
    game.CoreGui:FindFirstChild("ScriptGui"):Destroy()
end
if _G.HideKeybind == nil then _G.HideKeybind = Enum.KeyCode.P end

local ScriptGui = Instance.new("ScreenGui", game.CoreGui)
ScriptGui.Name = "ScriptGui"


local UIS = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")
local visible, Usable = true, true



function Lib:Window(Name)
    local Window = {}

    local Main = Instance.new("Frame", ScriptGui)
    local MainUICorner = Instance.new("UICorner", Main)
    local MainUIGradient = Instance.new("UIGradient", Main)
    local MainUIStroke = Instance.new("UIStroke", Main)
    local MainSeparator1 = Instance.new("Frame", Main)

    local WindowPonel = Instance.new("Frame", Main)
    local WindowMinimize = Instance.new("ImageButton", WindowPonel)

    Main.Size = UDim2.new(0,450,0,550)
    Main.Position = UDim2.new(0.5,0,0.3,0)
    Main.Active = true
    MainUICorner.CornerRadius = UDim.new(0,20)
    MainUIGradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(25,25,25)),
        ColorSequenceKeypoint.new(0.5, Color3.fromRGB(35,35,35)),
        ColorSequenceKeypoint.new(1, Color3.fromRGB(25,25,25))
    }
    MainUIStroke.Thickness = 5
    MainUIStroke.Color = Color3.fromRGB(35,35,35)
    MainUIStroke.Transparency = 0.01

    WindowPonel.Position = UDim2.new(0.05,0,0.015,0)
    WindowPonel.Size = UDim2.new(0.9,0,0,15)
    WindowPonel.BackgroundTransparency = 1
    WindowMinimize.Active = true
    WindowMinimize.Position = UDim2.new(0.95,0,0,0)
    WindowMinimize.Size = UDim2.new(0,20,1,0)
    WindowMinimize.Image = "rbxassetid://104192469031504"
    WindowMinimize.BackgroundTransparency = 1

    WindowMinimize.MouseButton1Click:Connect(function()
        local SizeUS,SizeNotUS = {Size = UDim2.new(0,450,0,550)},{Size = UDim2.new(0,450,0,50)}
        local crumpling = TweenInfo.new(0.5,Enum.EasingStyle.Quart, Enum.EasingDirection.Out)
        TweenService:Create(Main, crumpling, Main.Size.Y.Offset > 50 and SizeNotUS or SizeUS):Play()
    end)

    function Drag(Frame)
        local dragging = false
        local startPos, startMousePos

        Frame.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                dragging = true
                startMousePos, startPos = input.Position, Frame.Position
            end
        end)

        Frame.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                dragging = false
            end
        end)

        UIS.InputChanged:Connect(function(input)
            if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
                local delta = input.Position - startMousePos
                Frame.Position = UDim2.new(
                    startPos.X.Scale, startPos.X.Offset + delta.X,
                    startPos.Y.Scale, startPos.Y.Offset + delta.Y
                )
            end
        end)
    end
    Drag(Main)



    return Window
end

return Lib
