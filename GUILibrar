local Lib = {}
game.Loaded:Wait()



local player = game.Players.LocalPlayer
local Uis = game:GetService("UserInputService")
local TS = game:GetService("TweenService")
local Mouse = player:GetMouse()
local MarketplaceService = game:GetService("MarketplaceService")
local Minimized, MinimizeUsable, visible, Usable = false, true, true, true
if _G.HideKeybind == nil then _G.HideKeybind = Enum.KeyCode.P end

local function generateRandomName()
    local chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"
    local nameLength = 10
    local randomName = ""
    for i = 1, nameLength do
        randomName = randomName .. chars:sub(math.random(1, #chars), math.random(1, #chars))
    end
    return randomName
end
local randomName = generateRandomName()

if game.CoreGui:FindFirstChild(randomName) then
    game.CoreGui[randomName]:Destroy()
end

local ScriptGui = Instance.new("ScreenGui", game.CoreGui)
ScriptGui.Name = randomName
ScriptGui.ResetOnSpawn = false

Uis.InputBegan:Connect(function(input, gameProcesses)
    if gameProcesses or input.KeyCode ~= _G.HideKeybind or not Usable then return end
    Usable = false
    visible = not visible
    for _, v in pairs(ScriptGui:GetDescendants()) do
        if v:IsA("GuiObject") then
            v.Visible = visible
        end
    end
    Usable = true
end)



function Lib:Window(Name)
    local Window = {}
    
    local Main = Instance.new("Frame", ScriptGui)
    local MainStroke = Instance.new("UIStroke", Main)
    local MainGradient = Instance.new("UIGradient", Main)
    Main.Size = UDim2.new(0,600,0,600)
    Main.Position = UDim2.new(0.5,-300,0.5,-300)
    Main.Active = true
    MainStroke.Thickness = 4
    MainStroke.Color = Color3.fromRGB(100,100,100)
    MainStroke.LineJoinMode = Enum.ApplyStrokeMode.Miter
    MainGradient.Color = ColorSequence.new(Color3.fromRGB(75, 75, 75), Color3.fromRGB(95, 95, 95))

    local function AddDrag(frame)
        local dragging, offset = false, Vector2.new()
        frame.InputBegan:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                dragging = true
                offset = Vector2.new(input.Position.X - frame.AbsolutePosition.X, input.Position.Y - frame.AbsolutePosition.Y)
            end
        end)
        frame.InputChanged:Connect(function(input)
            if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
                frame.Position = UDim2.new(0, Mouse.X - offset.X, 0, Mouse.Y - offset.Y)
            end
        end)
        frame.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                dragging = false
            end
        end)
    end
    AddDrag(Main)
    

    return Window
end

return Lib
