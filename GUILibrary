local Lib = {}

local player = game.Players.LocalPlayer
local Uis = game:GetService("UserInputService")
local TS = game:GetService("TweenService")
local Mouse = player:GetMouse()
local MarketplaceService = game:GetService("MarketplaceService")
local Minimized, MinimizeUsable, visible, Usable = false, true, true, true
if _G.HideKeybind == nil then _G.HideKeybind = Enum.KeyCode.P end

local function generateRandomName()
    local chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"
    local randomName = ""
    for i = 1, 10 do
        randomName = randomName .. chars:sub(math.random(1, #chars), math.random(1, #chars))
    end
    return randomName
end
local randomName = generateRandomName()

if game.CoreGui:FindFirstChild(randomName) then
    game.CoreGui[randomName]:Destroy()
end

local ScriptGui = Instance.new("ScreenGui", game.CoreGui)
ScriptGui.Name = randomName
ScriptGui.ResetOnSpawn = false

Uis.InputBegan:Connect(function(input, gameProcesses)
    if gameProcesses or input.KeyCode ~= _G.HideKeybind or not Usable then return end
    Usable = false
    visible = not visible
    for _, v in pairs(ScriptGui:GetDescendants()) do
        if v:IsA("GuiObject") then
            v.Visible = visible
        end
    end
    Usable = true
end)

function Lib:Window()
    local Window = Instance.new("Frame")
    Window.Size = UDim2.new(0.5, 0, 0.7, 0)
    Window.Position = UDim2.new(0.25, 0, 0.15, 0)
    Window.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    Window.BorderSizePixel = 0
    Window.ClipsDescendants = true
    Window.Parent = ScriptGui

    local UICorner = Instance.new("UICorner")
    UICorner.CornerRadius = UDim.new(0.02, 0)
    UICorner.Parent = Window

    local TopBar = Instance.new("Frame")
    TopBar.Size = UDim2.new(1, 0, 0.06, 0)
    TopBar.BackgroundColor3 = Color3.fromRGB(150, 0, 200)
    TopBar.BorderSizePixel = 0
    TopBar.Parent = Window

    local TopBarCorner = Instance.new("UICorner")
    TopBarCorner.CornerRadius = UDim.new(0.02, 0)
    TopBarCorner.Parent = TopBar

    local Sidebar = Instance.new("Frame")
    Sidebar.Size = UDim2.new(0.15, 0, 0.94, 0)
    Sidebar.Position = UDim2.new(0, 0, 0.06, 0)
    Sidebar.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    Sidebar.BorderSizePixel = 0
    Sidebar.Parent = Window

    local SectionHolder = Instance.new("Frame")
    SectionHolder.Size = UDim2.new(0.85, 0, 0.94, 0)
    SectionHolder.Position = UDim2.new(0.15, 0, 0.06, 0)
    SectionHolder.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    SectionHolder.BorderSizePixel = 0
    SectionHolder.Parent = Window

    local Sections = {}

    function Lib:CreateSection(Name)
        local Section = Instance.new("Frame")
        Section.Size = UDim2.new(1, 0, 1, 0)
        Section.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
        Section.BorderSizePixel = 0
        Section.Visible = false
        Section.Parent = SectionHolder
        Sections[Name] = Section

        local SectionTitle = Instance.new("TextLabel")
        SectionTitle.Size = UDim2.new(1, 0, 0.05, 0)
        SectionTitle.BackgroundTransparency = 1
        SectionTitle.Text = Name
        SectionTitle.TextColor3 = Color3.fromRGB(200, 200, 200)
        SectionTitle.Font = Enum.Font.SourceSansBold
        SectionTitle.TextSize = 18
        SectionTitle.Parent = Section

        local Button = Instance.new("TextButton")
        Button.Size = UDim2.new(1, 0, 0.08, 0)
        Button.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
        Button.Text = Name
        Button.TextColor3 = Color3.fromRGB(200, 200, 200)
        Button.Font = Enum.Font.SourceSansBold
        Button.TextSize = 14
        Button.Parent = Sidebar

        Button.MouseButton1Click:Connect(function()
            for secName, sec in pairs(Sections) do
                sec.Visible = (secName == Name)
            end
        end)

        return Section
    end

    return Window
end

return Lib
